--[[
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘                é»‘æ´ä¸­å¿ƒè„šæœ¬ - ä¿®å¤ä¼˜åŒ–ç‰ˆ                â•‘
  â•‘                                                        â•‘
  â•‘  åŠŸèƒ½ï¼šé‡å­åŠ è½½ç³»ç»Ÿ Â· åæŒ‚æœºåè®® Â· å…¨æ¯UIç•Œé¢           â•‘
  â•‘  ä¼˜åŒ–ï¼šä¿®å¤é”™è¯¯ Â· å¢å¼ºå…¼å®¹æ€§ Â· æå‡ç¨³å®šæ€§              â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

-- å®‰å…¨åŠ è½½å‡½æ•°ï¼ˆä¿®å¤è¿”å›å€¼é”™è¯¯ï¼‰
local function safeLoad(url, maxRetries)
    maxRetries = maxRetries or 3
    local retries = 0
    
    while retries < maxRetries do
        local success, result = pcall(function()
            local content = game:HttpGet(url, true)
            local func = loadstring(content)
            if not func then error("ç¼–è¯‘å¤±è´¥") end
            return func()
        end)
        
        if success then
            return result  -- ä¿®å¤åŸä»£ç æœªè¿”å›æ­£ç¡®ç»“æœçš„é—®é¢˜
        else
            retries = retries + 1
            warn("âŸ³ åŠ è½½å°è¯• "..retries.."/"..maxRetries.." å¤±è´¥: "..url)
            task.wait(1)
        end
    end
    
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "âš ï¸ åŠ è½½é”™è¯¯",
        Text = "æ— æ³•åŠ è½½èµ„æº: "..url,
        Duration = 5,
        Icon = "rbxassetid://7733715405"
    })
    return nil
end

-- é«˜çº§åæŒ‚æœºç³»ç»Ÿï¼ˆä¿®å¤æ½œåœ¨é”™è¯¯ï¼‰
local function setupAntiAFK()
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    if not LocalPlayer then return end  -- ç¡®ä¿ç©å®¶å­˜åœ¨
    
    local vu = game:GetService("VirtualUser")
    local lastActive = os.time()
    
    LocalPlayer.Idled:Connect(function()
        local currentTime = os.time()
        if currentTime - lastActive > 120 then
            -- ä¿®å¤è¾“å…¥æ“ä½œå¯èƒ½çš„é”™è¯¯
            pcall(function()
                vu:Button2Down(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
                task.wait(0.5)
                vu:Button2Up(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
                print("âš¡ åæŒ‚æœºåè®®æ¿€æ´»")
            end)
        end
        lastActive = currentTime
    end)
    
    print("âœ“ åæŒ‚æœºç³»ç»Ÿå·²å¯ç”¨")
end

-- ä¸»ç•Œé¢é€šçŸ¥ï¼ˆä½¿ç”¨Orion UIï¼‰
local function showNotifications(OrionLib)
    if not OrionLib then return end
    
    OrionLib:MakeNotification({
        Name = "âš¡ è„šæœ¬å¯åŠ¨",
        Content = "æ­£åœ¨åˆå§‹åŒ–é‡å­æ ¸å¿ƒ...",
        Time = 3,
        Image = "rbxassetid://7733715405"
    })
    
    task.wait(1.5)
    
    OrionLib:MakeNotification({
        Name = "âœ“ ç³»ç»ŸçŠ¶æ€",
        Content = "åæŒ‚æœºåè®®å·²æ¿€æ´» Â· é‡å­é€šé“ç¨³å®š",
        Time = 4,
        Image = "rbxassetid://7733715405"
    })
end

-- ç©å®¶ä¿¡æ¯è·å–ï¼ˆå¢å¼ºå…¼å®¹æ€§ï¼‰
local function getPlayerInfo()
    local player = game.Players.LocalPlayer
    if not player then return {} end  -- ç¡®ä¿ç©å®¶å­˜åœ¨
    
    local info = {
        Name = player.Name,
        DisplayName = player.DisplayName,
        UserId = player.UserId,
        AccountAge = player.AccountAge,
        Executor = typeof(identifyexecutor) == "function" and identifyexecutor() or "æœªçŸ¥",  -- ä¿®å¤å‡½æ•°æ£€æŸ¥
        GameId = game.GameId,
        PlaceId = game.PlaceId
    }
    
    -- å°è¯•è·å–è§’è‰²æ•°æ®ï¼ˆå¢åŠ å®‰å…¨æ£€æŸ¥ï¼‰
    pcall(function()
        if player.Character and player.Character:FindFirstChildOfClass("Humanoid") then
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            info.Health = humanoid.Health
            info.MaxHealth = humanoid.MaxHealth
            info.WalkSpeed = humanoid.WalkSpeed
            info.JumpPower = humanoid.JumpPower
        end
    end)
    
    -- å°è¯•è·å–æ¸¸æˆç‰¹å®šæ•°æ®
    pcall(function()
        if game:GetService("ReplicatedStorage"):FindFirstChild("GetPlayerData") then
            local data = game:GetService("ReplicatedStorage").GetPlayerData:InvokeServer(player)
            if data then
                info.Level = data.Level or data.Lvl
                info.Coins = data.Coins or data.Money
                info.Rank = data.Rank or data.Title
            end
        end
    end)
    
    return info
end

-- ä¸»æ‰§è¡Œå‡½æ•°
local function main()
    -- åŠ è½½Orion UIåº“ï¼ˆä¼˜å…ˆåŠ è½½UIåº“ï¼‰
    local OrionLib = safeLoad('https://raw.githubusercontent.com/shlexware/Orion/main/source')
    if not OrionLib then 
        warn("æ— æ³•åŠ è½½UIåº“ï¼Œè„šæœ¬æ— æ³•æ­£å¸¸è¿è¡Œ")
        return 
    end
    
    -- åŠ è½½ä¸»è„šæœ¬
    safeLoad("https://pastebin.com/raw/9fFu43FF")
    
    -- æ˜¾ç¤ºåˆå§‹é€šçŸ¥
    showNotifications(OrionLib)
    
    -- å¯åŠ¨åæŒ‚æœº
    setupAntiAFK()
    
    -- åˆ›å»ºèµ›åšç§‘æŠ€æ„Ÿä¸»çª—å£
    local Window = OrionLib:MakeWindow({
        Name = "âŸ  é»‘æ´ä¸­å¿ƒé‡å­æ§åˆ¶å°",
        HidePremium = false,
        SaveConfig = true,
        IntroEnabled = true,
        IntroText = "é‡å­æ ¸å¿ƒå¯åŠ¨ä¸­...",
        IntroIcon = "rbxassetid://7734068321",
        ConfigFolder = "QuantumCoreConfig"
    })
    
    -- ç©å®¶ä¿¡æ¯æ ‡ç­¾é¡µ
    local PlayerTab = Window:MakeTab({
        Name = "ğŸ‘¤ ç©å®¶ä¿¡æ¯",
        Icon = "rbxassetid://7733960981",
        PremiumOnly = false
    })
    
    local playerInfo = getPlayerInfo()
    PlayerTab:AddParagraph("ğŸ†” ç”¨æˆ·å", playerInfo.Name or "æœªçŸ¥")
    PlayerTab:AddParagraph("ğŸ”§ æ³¨å…¥å™¨", playerInfo.Executor or "æœªçŸ¥")
    
    if playerInfo.Level then
        PlayerTab:AddParagraph("ğŸ“Š ç­‰çº§", tostring(playerInfo.Level))
    end
    
    if playerInfo.Coins then
        PlayerTab:AddParagraph("ğŸ’° é‡‘å¸", tostring(playerInfo.Coins))
    end
    
    if playerInfo.Health then
        PlayerTab:AddParagraph("â¤ï¸ ç”Ÿå‘½å€¼", string.format("%d/%d", playerInfo.Health, playerInfo.MaxHealth))
    end
    
    PlayerTab:AddParagraph("ğŸŒ æ¸¸æˆID", tostring(playerInfo.GameId))
    
    -- ç§»åŠ¨æ§åˆ¶æ ‡ç­¾é¡µ
    local MovementTab = Window:MakeTab({
        Name = "ğŸš€ ç§»åŠ¨æ§åˆ¶",
        Icon = "rbxassetid://7734068321",
        PremiumOnly = false
    })
    
    MovementTab:AddSlider({
        Name = "âš¡ ç§»åŠ¨é€Ÿåº¦",
        Min = 16,
        Max = 200,
        Default = 16,
        Color = Color3.fromRGB(0, 200, 200),
        Increment = 1,
        ValueName = "å•ä½",
        Callback = function(value)
            local player = game.Players.LocalPlayer
            if player and player.Character and player.Character:FindFirstChildOfClass("Humanoid") then
                player.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = value
            end
        end
    })
    
    MovementTab:AddSlider({
        Name = "ğŸ”¼ è·³è·ƒé«˜åº¦",
        Min = 50,
        Max = 200,
        Default = 50,
        Color = Color3.fromRGB(0, 200, 200),
        Increment = 5,
        ValueName = "å•ä½",
        Callback = function(value)
            local player = game.Players.LocalPlayer
            if player and player.Character and player.Character:FindFirstChildOfClass("Humanoid") then
                player.Character:FindFirstChildOfClass("Humanoid").JumpPower = value
            end
        end
    })
    
    MovementTab:AddButton({
        Name = "ğŸŒ€ ç¬ç§»åˆ°å‡ºç”Ÿç‚¹",
        Callback = function()
            local player = game.Players.LocalPlayer
            if player and player.Character and player.Character.PrimaryPart then
                local spawn = workspace:FindFirstChild("SpawnLocation") or workspace:FindFirstChild("SpawnPoint")
                if spawn then
                    player.Character:SetPrimaryPartCFrame(spawn.CFrame)
                else
                    OrionLib:MakeNotification({
                        Name = "âš ï¸ é”™è¯¯",
                        Content = "æœªæ‰¾åˆ°å‡ºç”Ÿç‚¹",
                        Time = 3
                    })
                end
            end
        end
    })
    
    -- æ¸¸æˆå·¥å…·æ ‡ç­¾é¡µ
    local ToolsTab = Window:MakeTab({
        Name = "ğŸ› ï¸ æ¸¸æˆå·¥å…·",
        Icon = "rbxassetid://7734068321",
        PremiumOnly = false
    })
    
    ToolsTab:AddButton({
        Name = "ğŸ”” ç©å®¶è¿›å‡ºæç¤º",
        Callback = function()
            safeLoad("https://raw.githubusercontent.com/boyscp/scriscriptsc/main/bbn.lua")
            OrionLib:MakeNotification({
                Name = "âœ“ æç¤ºç³»ç»Ÿæ¿€æ´»",
                Content = "ç©å®¶è¿›å‡ºé€šçŸ¥åŠŸèƒ½å·²å¯åŠ¨",
                Time = 3,
                Image = "rbxassetid://7733715405"
            })
        end
    })
    
    ToolsTab:AddButton({
        Name = "ğŸ“¸ å…¨æ¯æˆªå›¾",
        Callback = function()
            -- å®ç°ç®€å•çš„æˆªå›¾åŠŸèƒ½
            pcall(function()
                game:GetService("GuiService"):CaptureScreenshot()
            end)
            OrionLib:MakeNotification({
                Name = "âœ“ æˆªå›¾å®Œæˆ",
                Content = "æˆªå›¾å·²ä¿å­˜",
                Time = 3,
                Image = "rbxassetid://7733715405"
            })
        end
    })
    
    ToolsTab:AddToggle({
        Name = "ğŸŒŸ å¤œè§†æ¨¡å¼",
        Default = false,
        Callback = function(value)
            if value then
                game.Lighting.Ambient = Color3.new(1, 1, 1)
                game.Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
            else
                game.Lighting.Ambient = Color3.new(0.5, 0.5, 0.5)
                game.Lighting.OutdoorAmbient = Color3.new(0.5, 0.5, 0.5)
            end
        end
    })
    
    -- ç³»ç»Ÿä¿¡æ¯æ ‡ç­¾é¡µ
    local SystemTab = Window:MakeTab({
        Name = "âš™ï¸ ç³»ç»Ÿä¿¡æ¯",
        Icon = "rbxassetid://7734068321",
        PremiumOnly = false
    })
    
    SystemTab:AddParagraph("âŸ  é»‘æ´ä¸­å¿ƒ v2.1", "â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°")
    SystemTab:AddParagraph("âŸ³ è¿è¡ŒçŠ¶æ€", "é‡å­é€šé“ç¨³å®š Â· åæŒ‚æœºåè®®æ¿€æ´»")
    SystemTab:AddParagraph("ğŸ•’ ç³»ç»Ÿæ—¶é—´", os.date("%Y-%m-%d %H:%M:%S"))
    
    local fpsLabel = SystemTab:AddParagraph("ğŸ“Š FPS", "è®¡ç®—ä¸­...")
    local memLabel = SystemTab:AddParagraph("ğŸ’¾ å†…å­˜", "è®¡ç®—ä¸­...")
    
    -- æ€§èƒ½ç›‘æ§
    spawn(function()
        local RunService = game:GetService("RunService")
        local lastUpdate = os.clock()
        local frames = 0
        
        while true do
            frames = frames + 1
            if os.clock() - lastUpdate >= 1 then
                local fps = math.floor(frames / (os.clock() - lastUpdate))
                local mem = math.floor(collectgarbage("count") / 1024)
                
                fpsLabel:Set("ğŸ“Š FPS: "..tostring(fps))
                memLabel:Set(string.format("ğŸ’¾ å†…å­˜: %.2f MB", mem))
                
                frames = 0
                lastUpdate = os.clock()
            end
            RunService.RenderStepped:Wait()
        end
    end)
    
    -- åˆå§‹åŒ–é‡å­UI
    OrionLib:Init()
end

-- é”™è¯¯ä¿æŠ¤çš„ä¸»æ‰§è¡Œ
local success, err = pcall(main)
if not success then
    warn("âš¡ è„šæœ¬åˆå§‹åŒ–å¤±è´¥: " .. err)
    pcall(function()  -- å¢åŠ å®‰å…¨è°ƒç”¨
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "âš¡ ç³»ç»Ÿå´©æºƒ",
            Text = "é”™è¯¯è¯¦æƒ…: " .. err,
            Duration = 10,
            Icon = "rbxassetid://7733715405"
        })
    end)
    
    -- åˆ›å»ºå´©æºƒç‰¹æ•ˆï¼ˆå¢åŠ å®‰å…¨æ£€æŸ¥ï¼‰
    pcall(function()
        local player = game.Players.LocalPlayer
        if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local crashEffect = Instance.new("Part")
            crashEffect.Anchored = true
            crashEffect.CanCollide = false
            crashEffect.Size = Vector3.new(10, 10, 0)
            crashEffect.CFrame = player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 5, 0)
            crashEffect.Parent = workspace
            
            local mesh = Instance.new("SpecialMesh", crashEffect)
            mesh.MeshType = Enum.MeshType.Sphere
            
            local light = Instance.new("PointLight", crashEffect)
            light.Color = Color3.fromRGB(255, 0, 0)
            light.Range = 20
            light.Brightness = 5
            
            game.Debris:AddItem(crashEffect, 3)
            
            for i = 1, 0, -0.02 do
                crashEffect.Transparency = i
                mesh.Scale = mesh.Scale + Vector3.new(0.5, 0.5, 0)
                light.Brightness = light.Brightness - 0.5
                task.wait(0.01)
            end
        end
    end)
end
